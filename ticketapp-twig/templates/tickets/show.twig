{% extends 'layout.twig' %}
{% block content %}
  <h1 class="text-2xl font-bold mb-4">Ticket</h1>
  <div id="ticket-root">Loading...</div>
  <script type="module">
    import { getSession, getTicket } from '/js/app.js'
    (async function(){ if (!getSession()) return window.location.href='/auth/login'; const id = '{{ id }}'; try{ const t = await getTicket(id); if (!t){ alert('Ticket not found'); window.location.href='/tickets'; return } document.getElementById('ticket-root').innerHTML = `<div class="bg-white p-6 rounded-lg shadow"><h2 class="text-xl font-semibold">${t.title}</h2><p class="mt-2 text-gray-600">${t.description}</p><div class="mt-4">Status: <strong>${t.status}</strong></div><div class="mt-6"><a href="/tickets/${t.id}/edit" class="px-3 py-2 rounded bg-blue-600 text-white">Edit</a></div></div>` }catch(e){ alert('Failed to load ticket') } })()
  </script>
{% endblock %}
