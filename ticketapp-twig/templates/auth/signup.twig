{% extends 'layout.twig' %}
{% block content %}
  <div class="max-w-3xl mx-auto grid md:grid-cols-2 gap-8 items-center">
    <div>
      <h1 class="text-2xl font-bold">Create an account</h1>
      <p class="text-gray-600 mt-2">Sign up and start managing tickets immediately.</p>
    </div>
    <div>
      <form id="signup-form" class="max-w-md">
        <div id="form-error" class="text-red-600 mb-3" style="display:none"></div>
        <label class="block mb-2">Email
          <input id="email" class="mt-1 block w-full rounded border px-3 py-2" />
        </label>
        <div id="email-error" class="text-red-600 text-sm" style="display:none"></div>

        <label class="block mt-4 mb-2">Password
          <input id="password" type="password" class="mt-1 block w-full rounded border px-3 py-2" />
        </label>
        <div id="password-error" class="text-red-600 text-sm" style="display:none"></div>

        <div class="mt-6 flex gap-3">
          <button id="signup-btn" type="button" class="px-4 py-2 rounded bg-blue-600 text-white">Sign up</button>
        </div>
      </form>
    </div>
  </div>

  <script type="module">
    import { setSession } from '/js/app.js'
    document.getElementById('signup-btn').addEventListener('click', ()=>{
      const email = document.getElementById('email').value.trim()
      const password = document.getElementById('password').value.trim()
      const emailErr = document.getElementById('email-error')
      const passErr = document.getElementById('password-error')
      const formErr = document.getElementById('form-error')
      emailErr.style.display = 'none'; passErr.style.display='none'; formErr.style.display='none'
      let has=false
      if (!email){ emailErr.textContent='Email is required.'; emailErr.style.display='block'; has=true }
      if (!password){ passErr.textContent='Password is required.'; passErr.style.display='block'; has=true }
      if (password && password.length < 6){ passErr.textContent='Password must be at least 6 characters.'; passErr.style.display='block'; has=true }
      if (has) return
      setSession(email)
      window.location.href = '/dashboard'
    })
  </script>
{% endblock %}
